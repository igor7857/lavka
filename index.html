<!DOCTYPE HTML>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type">
	<meta content="text/css">
 	<title>Калькулятор лавки</title>
 	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="main">
		<div class="block-main">
			<div class="block-l-t">
				<form name="form_цена_чм" oninput="вычислить()" onload="вычислить()">
					<p>цена товара в чм</p>
					<input type="Number" id="input_цена_чм" min="1" value="19">				
				</form>
			</div>
		</div>
	</div>

	<div class="main">
		<div class="block-main">
			<div class="block">
				<form name="form_ед_товара" oninput="вычислить()" onload="вычислить()">
					<p>единиц товара</p>
					<input type="Number" id="input_ед_товара" min="1" value="1">
				</form>
			</div>
		</div>
	</div>

	<div class="main">
		<div class="block-main-r">
			<div class="block-r">
					<p id="vResult1"> руб</p>
					<p id="vResult2"> руб+голд</p>
			</div>
		</div>
	</div>
	<br>
	<br>
	<div class="main">
		<div class="block-main">
			<div class="block-new">
				<form name="form_продать_за" oninput="вычислить()" onload="вычислить()">
					<p>продать за</p>
					<input type="Number" id="input_продать_за" min="1">
					<br>
					<input class="checkbox" type="checkbox" id="cb_через_перекупа">
					<label for="cb_через_перекупа" style="font-size: 26px; vertical-align: bottom;">через перекупа</label>
				</form>
			</div>
		</div>
	</div>

	<div class="main">
		<div class="block-main-r50">
			<div class="block-r-new">
					<p id="vGold"> голд</p>
					<p id="vGoldSum"> голд</p>
			</div>
		</div>
		<div class="block-main-r50">
			<div class="block-l">
					<p>с продажи</p>
					<p>с продажи всего</p>
			</div>
		</div>
	</div>

	<div class="main">
		<div class="block-main-r50">
			<div class="block-r-new" style="border-top: 2px solid #999999; padding-top: 10px;">
					<p id="vKurs1kg"> руб</p>
					<p id="vKurs1r"> голд</p>
			</div>
		</div>
		<div class="block-main-r50">
			<div class="block-l" style="border-top: 2px solid #999999; padding-top: 10px;">
					<p>цена за 1000 голд</p>
					<p>за 1 руб</p>
			</div>
		</div>
	</div>

<script>
	form_цена_чм.onload = вычислить();
	function вычислить(){
		let курс = Number(0.12);
		let цена_чм = Number(form_цена_чм.input_цена_чм.value);
		let ед_товара = Number(form_ед_товара.input_ед_товара.value);
		let продать_за = Number(form_продать_за.input_продать_за.value);
		
		let result = (цена_чм * ед_товара * курс);
		result = result.toFixed(2);

		if (result >= 50) {result = Math.floor(result);};
		if (result < 50) {
			result = result * 10;
			result = Math.ceil(result);
			result = result / 10;
			result = result.toFixed(2);
		};

		let result21 = 3500 / 30750 * цена_чм * ед_товара;
		result21 = result21 * 10;
		result21 = Math.ceil(result21);
		result21 = result21 / 10;
		result21 = result21.toFixed(2);

		let result22 = (result - result21);
		result22 = result22.toFixed(2);
		result22 = result22 * 5 * 100;
		console.log(result);
		console.log(result21);
		
		let с_продажи;
		let ch = document.getElementById("cb_через_перекупа");
		if (ch.checked) {
			с_продажи = продать_за / 100 * 90;
			с_продажи = Math.ceil(с_продажи);
		}
		else {
			с_продажи = продать_за;
		};
		let с_продажи_всего = с_продажи * ед_товара;

		let Kurs1kg = цена_чм * курс / с_продажи * 1000;
		Kurs1kg = Kurs1kg.toFixed(2);
		let Kurs1r = с_продажи / (цена_чм * курс);
		Kurs1r = Math.round(Kurs1r);

		document.getElementById("vResult1").innerHTML = result + ` руб`;
		document.getElementById("vResult2").innerHTML = result21 + ` руб + ` + result22 + ` голд`;
		document.getElementById("vGold").innerHTML = с_продажи + ` голд`;
		document.getElementById("vGoldSum").innerHTML = с_продажи_всего + ` голд`;
		document.getElementById("vKurs1kg").innerHTML = Kurs1kg + ` руб`;
		document.getElementById("vKurs1r").innerHTML = Kurs1r + ` голд`;

	}
</script>

</body>
</html>